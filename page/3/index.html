<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Messay</title><meta name="description" content="坚实而沉重的活着。"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://messay.me/atom.xml" title="Messay"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/lovebaicai" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><ul class="home post-list"><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/02/06/牛顿迭代法计算平方根-Golang-Python实现/" class="post-title-link">牛顿迭代法计算平方根(Golang,Python实现)</a></h2><div class="post-info">Feb 6, 2018</div><div class="post-content"><h4 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h4><ul>
<li>牛顿法是通过选择一个初始点 z 然后重复这一过程求 Sqrt(x) 的近似值：<br><img src="http://7xnh53.com1.z0.glb.clouddn.com/niudun.png" alt>
　　</li>
<li><p>为了做到这个，只需要重复计算 10 次，并且观察不同的值（1，2，3，……）是如何逐步逼近结果的。 然后，修改循环条件，使得当值停止改变（或改变非常小）的时候退出循环。</p>
</li>
<li><p>牛顿迭代法的原理很简单，其实是根据f(x)在x0附近的值和斜率，估计f(x)和x轴的交点，看此动态图：<br><img src="http://7xnh53.com1.z0.glb.clouddn.com/Q2Uk_sHeyQSe6VIOp7PnB7PRNYlLd-bHonnaQ2If6O4sAQAA1gAAAEdJ.gif" alt></p>
</li>
<li><p>提示：定义并初始化一个浮点值，向其提供一个浮点语法或使用转换：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">z := float64(1)</span><br><span class="line">z := 1.0</span><br></pre></td></tr></table></figure></div><a href="/2018/02/06/牛顿迭代法计算平方根-Golang-Python实现/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/01/29/使用Python操作redis方法总结/" class="post-title-link">使用Python操作redis方法总结</a></h2><div class="post-info">Jan 29, 2018</div><div class="post-content"><h4 id="分布式爬虫使用的是Scrapy-Redis的架构，使用Python操作的redis的方法，总结一下。"><a href="#分布式爬虫使用的是Scrapy-Redis的架构，使用Python操作的redis的方法，总结一下。" class="headerlink" title="分布式爬虫使用的是Scrapy+Redis的架构，使用Python操作的redis的方法，总结一下。"></a>分布式爬虫使用的是Scrapy+Redis的架构，使用Python操作的redis的方法，总结一下。</h4><h4 id="Python操作redis"><a href="#Python操作redis" class="headerlink" title="Python操作redis"></a>Python操作redis</h4><ul>
<li>redis模块提供两个类Redis和StrictRedis用于实现Redis的命令，StrictRedis用于实现大部分官方的命令，并使用官方的语法和命令，Redis是StrictRedis的子类，用于向后兼容旧版本的redis-py（官方建议使用StrictRedis）。</li>
<li>示例代码如下：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ pip install redis</span><br><span class="line"></span><br><span class="line">使用redis：</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> redis</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pool = redis.ConnectionPool(host=<span class="string">'localhost'</span>, port=<span class="number">6379</span>, decode_responses=<span class="literal">True</span>)   </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = redis.Redis(connection_pool=pool)</span><br><span class="line"></span><br><span class="line">使用StrictRedis</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pool = redis.ConnectionPool(host=<span class="string">'127.0.0.1'</span>, port=<span class="number">6379</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = redis.StrictRedis(connection_pool=pool)</span><br></pre></td></tr></table></figure></div><a href="/2018/01/29/使用Python操作redis方法总结/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/01/18/python实现10个随机整数序列几种方法/" class="post-title-link">python实现10个随机整数序列几种方法</a></h2><div class="post-info">Jan 18, 2018</div><div class="post-content"><ul>
<li><p>numpy模块：numpy.random.randint(low[, high, size]) 返回随机的整数，位于半开区间 [low, high)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">relist = np.random.randint(10,size=10)</span><br></pre></td></tr></table></figure>
</li>
<li><p>numpy模块：numpy.random.permutation(x)返回随机序列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">relist = list(np.random.permutation(10))</span><br></pre></td></tr></table></figure>
</li>
</ul></div><a href="/2018/01/18/python实现10个随机整数序列几种方法/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/01/12/centos升级glibc，编译过程及问题注意/" class="post-title-link">centos升级glibc，编译过程及问题注意</a></h2><div class="post-info">Jan 12, 2018</div><div class="post-content"><h4 id="centos升级glibc2-14，编译过程及问题注意"><a href="#centos升级glibc2-14，编译过程及问题注意" class="headerlink" title="centos升级glibc2.14，编译过程及问题注意"></a>centos升级glibc2.14，编译过程及问题注意</h4><h5 id="买了一台小鸡搭ss，因为是openvz的机器，无法安装kvm的加速，于是装了个OpenVZ改google-bbr的加速。因为glibc版本过低，无法安装，于是升级，此为前提。"><a href="#买了一台小鸡搭ss，因为是openvz的机器，无法安装kvm的加速，于是装了个OpenVZ改google-bbr的加速。因为glibc版本过低，无法安装，于是升级，此为前提。" class="headerlink" title="买了一台小鸡搭ss，因为是openvz的机器，无法安装kvm的加速，于是装了个OpenVZ改google bbr的加速。因为glibc版本过低，无法安装，于是升级，此为前提。"></a>买了一台小鸡搭ss，因为是openvz的机器，无法安装kvm的加速，于是装了个OpenVZ改google bbr的加速。因为glibc版本过低，无法安装，于是升级，此为前提。</h5><h5 id="特别注意：-请勿在生产环境或者没有备份数据的情况下升级glibc"><a href="#特别注意：-请勿在生产环境或者没有备份数据的情况下升级glibc" class="headerlink" title="特别注意： 请勿在生产环境或者没有备份数据的情况下升级glibc"></a>特别注意： 请勿在生产环境或者没有备份数据的情况下升级glibc</h5><ul>
<li><strong>使用源代码方式升级 Glibc 是需要小心考虑的事情，因为整个系统几乎所有应用程序都依赖于原有的动态库，升级的时候，执行”make install”命令会打断旧的动态库链接，改为指向新的库文件。在这个过程中，不同的链接指向新旧不同版本的库文件，很容易导致系统崩溃，崩溃后，一般是无法重新启动的。</strong></li>
</ul>
<h5 id="安装glibc过程："><a href="#安装glibc过程：" class="headerlink" title="安装glibc过程："></a>安装glibc过程：</h5><ol>
<li><p>查看系统glibc库版本可使用如下命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ strings /lib64/libc.so.6 |grep GLIBC_</span><br></pre></td></tr></table></figure>
</li>
</ol></div><a href="/2018/01/12/centos升级glibc，编译过程及问题注意/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/12/31/2017年终总结/" class="post-title-link">2017年终总结</a></h2><div class="post-info">Dec 31, 2017</div><div class="post-content"><h4 id="关于工作"><a href="#关于工作" class="headerlink" title="关于工作"></a>关于工作</h4><ol>
<li>工作依然在努力。</li>
<li>2017年是来到上海的第二个年头，不知不觉一年就过去。今年换了一份新工作，总算是脱离之前不清不楚的工作范围。现在的工作是Python开发+运维。</li>
<li>刚毕业的时候做简单的helpdesk的时候，也没想到能走到今天写代码的这一步。当积累了知识越多，就会发现缺少的知识更多。特别是IT这个行业，更需要持续不断的学习。</li>
<li>大专毕业5年，一路走来，每个阶段都是自己独自度过，颇为坎坷。明年会往后端方向努力，争取能做个后端开发，或者运维开发一类的工作，希望这能成为以后长期发展的方向。</li>
</ol></div><a href="/2017/12/31/2017年终总结/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/12/20/Mac-10-12报错-Click-More-Info…-to-visit-the-Java-Developer-Kit-download-website-解决方法/" class="post-title-link">Mac 10.12报错:Click More Info… to visit the Java Developer Kit download website.解决方法</a></h2><div class="post-info">Dec 20, 2017</div><div class="post-content"></div><a href="/2017/12/20/Mac-10-12报错-Click-More-Info…-to-visit-the-Java-Developer-Kit-download-website-解决方法/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/12/15/升级vmware14，Not-enough-physical-memory报错解决方法/" class="post-title-link">升级vmware14，Not enough physical memory报错解决方法</a></h2><div class="post-info">Dec 15, 2017</div><div class="post-content"><ul>
<li>使用debian，一时手贱update了下系统，vmware虚拟机无法使用,升级vmware版本，仍报错‘Not enough physical memory’， 求助google，解决。</li>
<li>大概原因是vmware有个限制的physical memory的设定，不让intel的显卡开启3d加速一类的功能，解除这个限制，更新了就ok了，命令如下：</li>
</ul></div><a href="/2017/12/15/升级vmware14，Not-enough-physical-memory报错解决方法/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/12/12/常见爬虫反爬策略的处理办法及个人一些感悟/" class="post-title-link">常见爬虫反爬策略的处理办法及个人一些感悟</a></h2><div class="post-info">Dec 12, 2017</div><div class="post-content"><h4 id="今年一年都是在与爬虫打交道，国内常见的电商平台都已经抓了遍，有些小体量的平台貌似也没放过。目前一共处理了30多个电商平台的数据抓取，一些反爬策略的体验及处理。"><a href="#今年一年都是在与爬虫打交道，国内常见的电商平台都已经抓了遍，有些小体量的平台貌似也没放过。目前一共处理了30多个电商平台的数据抓取，一些反爬策略的体验及处理。" class="headerlink" title="今年一年都是在与爬虫打交道，国内常见的电商平台都已经抓了遍，有些小体量的平台貌似也没放过。目前一共处理了30多个电商平台的数据抓取，一些反爬策略的体验及处理。"></a>今年一年都是在与爬虫打交道，国内常见的电商平台都已经抓了遍，有些小体量的平台貌似也没放过。目前一共处理了30多个电商平台的数据抓取，一些反爬策略的体验及处理。</h4><ul>
<li>平台目前遇到的反爬策略以下几种，比较常见：<ol>
<li>HTTP请求头限制（最简单，基础）</li>
<li>IP地址限制</li>
<li>IP+Cookie限制</li>
<li>用户行为分析限制</li>
<li>请求URL加时间戳salt，sign验证（最难处理）</li>
<li>数据蜜罐</li>
</ol>
</li>
</ul></div><a href="/2017/12/12/常见爬虫反爬策略的处理办法及个人一些感悟/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/10/25/Ansible-Playbook执行多个tasks配置分析/" class="post-title-link">Ansible Playbook执行多个tasks配置分析</a></h2><div class="post-info">Oct 25, 2017</div><div class="post-content"><h5 id="分布式爬虫需要多机器配置，又懒得每台机器都去登录配置环境，于是用了Ansible，相当方便。关于一个playbook配置执行多个tasks，分享一波。"><a href="#分布式爬虫需要多机器配置，又懒得每台机器都去登录配置环境，于是用了Ansible，相当方便。关于一个playbook配置执行多个tasks，分享一波。" class="headerlink" title="分布式爬虫需要多机器配置，又懒得每台机器都去登录配置环境，于是用了Ansible，相当方便。关于一个playbook配置执行多个tasks，分享一波。"></a>分布式爬虫需要多机器配置，又懒得每台机器都去登录配置环境，于是用了Ansible，相当方便。关于一个playbook配置执行多个tasks，分享一波。</h5><ul>
<li>网上充斥各种教程，都是让你这么来执行多个tasks：<strong><em>task list中的各任务按次序逐个在hosts中指定的所有主机上执行即在所有主机上完成第一个任务后再开始第二个。在运行自下而下某playbook时如果中途发生错误所有已执行任务都将回滚因此在更正playbook后重新执行一次即可</em></strong>。 </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tasks:</span><br><span class="line">  - name: echo date</span><br><span class="line">    command: echo &quot;date&quot;</span><br><span class="line">tasks:</span><br><span class="line">  - name: echo date_output</span><br><span class="line">    command: echo &quot;date_output&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>然而并不能按照上面的说法来依次执行，这种写法只会报个<strong>WARNING</strong>，然后只执行最后一个tasks：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[WARNING]: While constructing a mapping from /opt/ansible/test.yaml, line 1, column 2, found a duplicate dict key (tasks).  Using last defined value only.</span><br></pre></td></tr></table></figure>
<ul>
<li>playbook在同一个<strong><em>指定操作的远程主机</em></strong>并不能顺序执行多个tasks。正确的写法，应该是把命令全部写在一个tasks里，like this：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tasks:</span><br><span class="line">  - name: echo date</span><br><span class="line">    command: echo &quot;date&quot;</span><br><span class="line">  - name: echo date_output</span><br><span class="line">    command: echo &quot;date_output&quot;</span><br></pre></td></tr></table></figure></div><a href="/2017/10/25/Ansible-Playbook执行多个tasks配置分析/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/10/15/Debian-Ubuntu无netstat命令解决方案/" class="post-title-link">Debian/Ubuntu无netstat命令解决方案</a></h2><div class="post-info">Oct 15, 2017</div><div class="post-content"><ul>
<li>之前用的ubuntu系统，不知道是系统不稳定，还是我操作有问题。经常无缘无故的崩溃，选择许久，换成了Debian系统。相当稳定，流畅。</li>
<li><p>Debian系统默认不带netstat等命令，如果使用就会报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash: netstat: command not found - Debian/Ubuntu Linux</span><br></pre></td></tr></table></figure>
</li>
<li><p>解决方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install net-tools</span><br><span class="line"></span><br><span class="line">#如果需要ping的话，安装如下软件</span><br><span class="line">sudo apt-get install iputils-ping</span><br></pre></td></tr></table></figure>
</li>
</ul></div><a href="/2017/10/15/Debian-Ubuntu无netstat命令解决方案/" class="read-more">...more</a></article></li></ul></main><footer><div class="paginator"><a href="/page/2/" class="prev">PREV</a><a href="/page/4/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2021 <a href="http://messay.me">Messay</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>